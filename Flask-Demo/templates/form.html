<!-- form.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Image</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1>Generate Image</h1>
    <form id="imageForm" method="POST" action="/submit" enctype="multipart/form-data">
        <label for="prompt">Enter Prompt:</label><br>
        <input type="text" id="prompt" name="prompt"><br/><br/>
        <label for="prompt">Upload Your Existing Image:</label><br>
        <input type="file" id="logo" name="logo" accept="image/*"><br>
        <button type="submit">Generate Image</button>
    </form>
    <div id="loading" style="display:none;">Loading...</div>
    <div id="imageContainer"></div>

    <script>
        $(document).ready(function(){
            $('#imageForm').submit(function(event){
                event.preventDefault();
                $('#loading').show(); // Show loading icon

                var form = $(this);
                var formData = form.serialize();
                
                $.ajax({
                    type: form.attr('method'),
                    url: form.attr('action'),
                    data: formData,
                    success: function(response){
                        $('#imageContainer').html(response); // Add image to container
                        $('#loading').hide(); // Hide loading icon
                    },
                    error: function(xhr, status, error){
                        $('#imageContainer').html('<div>Error: ' + error + '</div>'); // Display error message
                        $('#loading').hide(); // Hide loading icon
                    }
                });
            });
        });
    </script>
</body>
</html>
